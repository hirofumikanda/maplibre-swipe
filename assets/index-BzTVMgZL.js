(function(){const p=document.createElement("link").relList;if(p&&p.supports&&p.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))f(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const t of u.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&f(t)}).observe(document,{childList:!0,subtree:!0});function v(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function f(l){if(l.ep)return;l.ep=!0;const u=v(l);fetch(l.href,u)}})();(function c(p,v,f){function l(i,d){if(!v[i]){if(!p[i]){var a=typeof require=="function"&&require;if(!d&&a)return a(i,!0);if(u)return u(i,!0);throw(d=new Error("Cannot find module '"+i+"'")).code="MODULE_NOT_FOUND",d}a=v[i]={exports:{}},p[i][0].call(a.exports,function(m){return l(p[i][1][m]||m)},a,a.exports,c,p,v,f)}return v[i].exports}for(var u=typeof require=="function"&&require,t=0;t<f.length;t++)l(f[t]);return l})({1:[function(c,p,v){var f=c("@mapbox/mapbox-gl-sync-move"),l=c("events").EventEmitter;function u(t,i,d,a){if(this.options=a||{},this._mapA=t,this._mapB=i,this._horizontal=this.options.orientation==="horizontal",this._onDown=this._onDown.bind(this),this._onMove=this._onMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._ev=new l,this._swiper=document.createElement("div"),this._swiper.className=this._horizontal?"compare-swiper-horizontal":"compare-swiper-vertical",this._controlContainer=document.createElement("div"),this._controlContainer.className=this._horizontal?"maplibregl-compare maplibregl-compare-horizontal":"maplibregl-compare",this._controlContainer.className=this._controlContainer.className,this._controlContainer.appendChild(this._swiper),typeof d=="string"&&document.body.querySelectorAll){if(a=document.body.querySelectorAll(d)[0],!a)throw new Error("Cannot find element with specified container selector.");a.appendChild(this._controlContainer)}else{if(!(d instanceof Element&&d.appendChild))throw new Error("Invalid container specified. Must be CSS selector or HTML element.");d.appendChild(this._controlContainer)}this._bounds=i.getContainer().getBoundingClientRect(),a=(this._horizontal?this._bounds.height:this._bounds.width)/2,this._setPosition(a),this._clearSync=f(t,i),this._onResize=(function(){this._bounds=i.getContainer().getBoundingClientRect(),this.currentPosition&&this._setPosition(this.currentPosition)}).bind(this),i.on("resize",this._onResize),this.options&&this.options.mousemove&&(t.getContainer().addEventListener("mousemove",this._onMove),i.getContainer().addEventListener("mousemove",this._onMove)),this._swiper.addEventListener("mousedown",this._onDown),this._swiper.addEventListener("touchstart",this._onDown)}u.prototype={_setPointerEvents:function(t){this._controlContainer.style.pointerEvents=t,this._swiper.style.pointerEvents=t},_onDown:function(t){t.touches?(document.addEventListener("touchmove",this._onMove),document.addEventListener("touchend",this._onTouchEnd)):(document.addEventListener("mousemove",this._onMove),document.addEventListener("mouseup",this._onMouseUp))},_setPosition:function(t){t=Math.min(t,this._horizontal?this._bounds.height:this._bounds.width);var i=this._horizontal?"translate(0, "+t+"px)":"translate("+t+"px, 0)",i=(this._controlContainer.style.transform=i,this._controlContainer.style.WebkitTransform=i,this._horizontal?"rect(0, 999em, "+t+"px, 0)":"rect(0, "+t+"px, "+this._bounds.height+"px, 0)"),d=this._horizontal?"rect("+t+"px, 999em, "+this._bounds.height+"px,0)":"rect(0, 999em, "+this._bounds.height+"px,"+t+"px)";this._mapA.getContainer().style.clip=i,this._mapB.getContainer().style.clip=d,this.currentPosition=t},_onMove:function(t){this.options&&this.options.mousemove&&this._setPointerEvents(t.touches?"auto":"none"),this._horizontal?this._setPosition(this._getY(t)):this._setPosition(this._getX(t))},_onMouseUp:function(){document.removeEventListener("mousemove",this._onMove),document.removeEventListener("mouseup",this._onMouseUp),this.fire("slideend",{currentPosition:this.currentPosition})},_onTouchEnd:function(){document.removeEventListener("touchmove",this._onMove),document.removeEventListener("touchend",this._onTouchEnd),this.fire("slideend",{currentPosition:this.currentPosition})},_getX:function(t){return t=(t=t.touches?t.touches[0]:t).clientX-this._bounds.left,t=(t=t<0?0:t)>this._bounds.width?this._bounds.width:t},_getY:function(t){return t=(t=t.touches?t.touches[0]:t).clientY-this._bounds.top,t=(t=t<0?0:t)>this._bounds.height?this._bounds.height:t},setSlider:function(t){this._setPosition(t)},on:function(t,i){return this._ev.on(t,i),this},fire:function(t,i){return this._ev.emit(t,i),this},off:function(t,i){return this._ev.removeListener(t,i),this},remove:function(){this._clearSync(),this._mapB.off("resize",this._onResize);var t=this._mapA.getContainer(),t=(t&&(t.style.clip=null,t.removeEventListener("mousemove",this._onMove)),this._mapB.getContainer());t&&(t.style.clip=null,t.removeEventListener("mousemove",this._onMove)),this._swiper.removeEventListener("mousedown",this._onDown),this._swiper.removeEventListener("touchstart",this._onDown),this._controlContainer.remove()}},window.maplibregl?maplibregl.Compare=u:p!==void 0&&(p.exports=u)},{"@mapbox/mapbox-gl-sync-move":2,events:3}],2:[function(c,p,v){p.exports=function(){var f=arguments.length;if(f===1)l=arguments[0];else for(var l=[],u=0;u<f;u++)l.push(arguments[u]);var t=[];function i(){l.forEach(function(a,m){a.on("move",t[m])})}function d(){l.forEach(function(a,m){a.off("move",t[m])})}return l.forEach(function(a,m){t[m]=(function(L,w){d(),function(y,E){var C=y.getCenter(),x=y.getZoom(),e=y.getBearing(),n=y.getPitch();E.forEach(function(o){o.jumpTo({center:C,zoom:x,bearing:e,pitch:n})})}(L,w),i()}).bind(null,a,l.filter(function(L,w){return w!==m}))}),i(),function(){d(),t=[]}}},{}],3:[function(c,p,v){var f=typeof Reflect=="object"?Reflect:null,l=f&&typeof f.apply=="function"?f.apply:function(e,n,o){return Function.prototype.apply.call(e,n,o)},u=f&&typeof f.ownKeys=="function"?f.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},t=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}p.exports=i,p.exports.once=function(e,n){return new Promise(function(o,s){function h(z){e.removeListener(n,r),s(z)}function r(){typeof e.removeListener=="function"&&e.removeListener("error",h),o([].slice.call(arguments))}var _,g,b;x(e,n,r,{once:!0}),n!=="error"&&(g=h,b={once:!0},typeof(_=e).on=="function"&&x(_,"error",g,b))})},(i.EventEmitter=i).prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var d=10;function a(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function m(e){return e._maxListeners===void 0?i.defaultMaxListeners:e._maxListeners}function L(e,n,o,s){var h,r;return a(o),(h=e._events)===void 0?(h=e._events=Object.create(null),e._eventsCount=0):(h.newListener!==void 0&&(e.emit("newListener",n,o.listener||o),h=e._events),r=h[n]),r===void 0?(r=h[n]=o,++e._eventsCount):(typeof r=="function"?r=h[n]=s?[o,r]:[r,o]:s?r.unshift(o):r.push(o),0<(h=m(e))&&r.length>h&&!r.warned&&(r.warned=!0,(s=new Error("Possible EventEmitter memory leak detected. "+r.length+" "+String(n)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",s.emitter=e,s.type=n,s.count=r.length,o=s,console&&console.warn&&console.warn(o))),e}function w(e,n,o){return e={fired:!1,wrapFn:void 0,target:e,type:n,listener:o},n=(function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}).bind(e),n.listener=o,e.wrapFn=n}function y(e,n,o){if(e=e._events,e===void 0)return[];e=e[n];{if(e===void 0)return[];if(typeof e=="function")return o?[e.listener||e]:[e];if(o){for(var s=e,h=new Array(s.length),r=0;r<h.length;++r)h[r]=s[r].listener||s[r];return h}return C(e,e.length)}}function E(e){var n=this._events;if(n!==void 0){if(n=n[e],typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}function C(e,n){for(var o=new Array(n),s=0;s<n;++s)o[s]=e[s];return o}function x(e,n,o,s){if(typeof e.on=="function")s.once?e.once(n,o):e.on(n,o);else{if(typeof e.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(n,function h(r){s.once&&e.removeEventListener(n,h),o(r)})}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return d},set:function(e){if(typeof e!="number"||e<0||t(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");d=e}}),i.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||t(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return m(this)},i.prototype.emit=function(e){for(var n=[],o=1;o<arguments.length;o++)n.push(arguments[o]);var s=e==="error",h=this._events;if(h!==void 0)s=s&&h.error===void 0;else if(!s)return!1;if(s)throw(r=0<n.length?n[0]:r)instanceof Error?r:(s=new Error("Unhandled error."+(r?" ("+r.message+")":"")),s.context=r,s);var r=h[e];if(r===void 0)return!1;if(typeof r=="function")l(r,this,n);else for(var _=r.length,g=C(r,_),o=0;o<_;++o)l(g[o],this,n);return!0},i.prototype.on=i.prototype.addListener=function(e,n){return L(this,e,n,!1)},i.prototype.prependListener=function(e,n){return L(this,e,n,!0)},i.prototype.once=function(e,n){return a(n),this.on(e,w(this,e,n)),this},i.prototype.prependOnceListener=function(e,n){return a(n),this.prependListener(e,w(this,e,n)),this},i.prototype.off=i.prototype.removeListener=function(e,n){var o,s,h,r,_;if(a(n),(s=this._events)===void 0)return this;if((o=s[e])===void 0)return this;if(o===n||o.listener===n)--this._eventsCount==0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,o.listener||n));else if(typeof o!="function"){for(h=-1,r=o.length-1;0<=r;r--)if(o[r]===n||o[r].listener===n){_=o[r].listener,h=r;break}if(h<0)return this;if(h===0)o.shift();else{for(var g=o,b=h;b+1<g.length;b++)g[b]=g[b+1];g.pop()}o.length===1&&(s[e]=o[0]),s.removeListener!==void 0&&this.emit("removeListener",e,_||n)}return this},i.prototype.removeAllListeners=function(e){var n,o=this._events;if(o===void 0)return this;if(o.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):o[e]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete o[e]),this;if(arguments.length===0){for(var s,h=Object.keys(o),r=0;r<h.length;++r)(s=h[r])!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(n=o[e])=="function")this.removeListener(e,n);else if(n!==void 0)for(r=n.length-1;0<=r;r--)this.removeListener(e,n[r]);return this},i.prototype.listeners=function(e){return y(this,e,!0)},i.prototype.rawListeners=function(e){return y(this,e,!1)},i.listenerCount=function(e,n){return typeof e.listenerCount=="function"?e.listenerCount(n):E.call(e,n)},i.prototype.listenerCount=E,i.prototype.eventNames=function(){return 0<this._eventsCount?u(this._events):[]}},{}]},{},[1]);var O=new maplibregl.Map({container:"before",style:"./styles/rekichizu.json",center:[139.767,35.681],zoom:14,hash:!0}),M=new maplibregl.Map({container:"after",style:"./styles/gsi_std.json",center:[139.767,35.681],zoom:14}),S="#comparison-container";new maplibregl.Compare(O,M,S,{});M.on("load",async()=>{M.addControl(new maplibregl.NavigationControl)});function P(c){c.on("contextmenu",p=>{const v=c.queryRenderedFeatures(p.point);if(j(c),v.length>0){console.log("フィーチャ数："+v.length);for(const u of v)console.log("レイヤーID："+u.layer.id),console.log("フィーチャID："+u.id),console.log(JSON.stringify(u.properties,null,2));const f=v.filter(u=>"layer"in u&&u.layer.type==="line");f.length>0&&c.getSource("highlight-source-line").setData({type:"FeatureCollection",features:f});const l=v.filter(u=>"layer"in u&&u.layer.type==="fill"&&u.layer.id!=="land");l.length>0&&c.getSource("highlight-source-fill").setData({type:"FeatureCollection",features:l})}})}function j(c){c.getSource("highlight-source-line")&&(c.removeLayer("highlight-layer-line"),c.removeSource("highlight-source-line")),c.addSource("highlight-source-line",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),c.addLayer({id:"highlight-layer-line",type:"line",source:"highlight-source-line",paint:{"line-color":"rgb(255, 0, 0)","line-width":2,"line-opacity":.8}}),c.getSource("highlight-source-fill")&&(c.removeLayer("highlight-layer-fill"),c.removeSource("highlight-source-fill")),c.addSource("highlight-source-fill",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),c.addLayer({id:"highlight-layer-fill",type:"fill",source:"highlight-source-fill",paint:{"fill-outline-color":"rgb(255, 0, 0)"}})}P(O);P(M);
